---
title: 备份文件泄露漏洞
date: 2020-03-02 22:18:33
tags: [ctf, web, 信息泄露]
---
# 导语
这些信息泄露的漏洞只有马虎的程序员才会犯，希望大家都不要犯错哦~
这些题在[ctfhub](https://www.ctfhub.com/#/skilltree)里都可以重做哒。
<!-- more -->
# 网站源码
可能会有马虎的程序员将整个网站的源码打包起来且放在了网站目录下，导致我们可以直接获取网站的源码，给我们进一步渗透提供了更加广泛的思路。
题目给了我们常见的备份文件字段和后缀，那我们直接写脚本就行了
``` python
#! python3
import requests
url1 = 'http://challenge-8b081249201cd9d3.sandbox.ctfhub.com:10080/'
list1 = ['web', 'website', 'backup', 'back', 'www', 'wwwroot', 'temp']
list2 = ['tar', 'tar.gz', 'zip', 'rar']

for i in list1:
    for j in list2:
        back = str(i) + '.' + str(j)
        url = str(url1) + '/' + back
        print(back + '    ', end='')
        print(len(requests.get(url).text))
        print(requests.get(url).status_code)
```
使用request返回数据长度和状态可以判断存在www.zip然后解压发现有一个flag_XXX.txt，再去访问即可。

# bak文件
有些时候网站管理员可能为了方便，会在修改某个文件的时候先复制一份，将其命名为xxx.bak。而大部分Web Server对bak文件并不做任何处理，导致可以直接下载，从而获取到网站某个文件的源代码
题目里直接index.php.bak，然后用一个普通的文本处理器打开就可以了，或者直接curl。

# vim
vim在意外退出时候会保存一个.swp文件，这个文件是一个临时交换文件，用来备份缓冲区中的内容。
需要注意的是如果你并没有对文件进行修改，而只是读取文件，是不会产生.swp文件的
意外退出时，并不会覆盖旧的交换文件，而是会重新生成新的交换文件。而原来的文件中并不会有这次的修改，文件内容还是和打开时一样。
例如，第一次产生的交换文件名为“.file.txt.swp”；再次意外退出后，将会产生名为“.file.txt.swo”的交换文件；而第三次产生的交换文件则为“.file.txt.swn”；依此类推。
于是我们直接/.index.php.swp下载，然后可以用vim恢复他，或者直接用curl，或者用winhex打开也能找到。

# .DS_Store
DS_Store 文件利用 .DS_Store 是 Mac OS 保存文件夹的自定义属性的隐藏文件。通过.DS_Store可以知道这个目录里面所有文件的清单。
直接curl或者winhex，可以找到对应的txt文件名，然后访问就完事儿了。

参考：
https://blog.csdn.net/pwiling/article/details/51830781