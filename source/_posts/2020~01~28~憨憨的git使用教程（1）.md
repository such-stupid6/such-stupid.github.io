---
title: 憨憨的git使用教程（1）
date: 2020-01-28 15:49:14
tags: 杂项
---

# 导语
git一开始在linux平台使用，但后来我们也移植到了windows。git在多人协作的软件开发非常有用，但是我是憨憨，不咋会用。所以学习了git使用，搁着做个简单的学习笔记。
<!-- more -->
# git简介
[git](https://git-scm.com/) 是一个版本控制工具。说到版本控制，git一般横向对比于SVN，他们有如下的区别点。
1. **Git 是分布式的，SVN 不是**：这是 Git 和其它非分布式的版本控制系统，例如 SVN，CVS 等，最核心的区别。
2. **Git 把内容按元数据方式存储，而 SVN 是按文件**：所有的资源控制系统都是把文件的元信息隐藏在一个类似 .svn、.cvs 等的文件夹里。
3. **Git 分支和 SVN 的分支不同**：分支在 SVN 中一点都不特别，其实它就是版本库中的另外一个目录。
4. **Git 没有一个全局的版本号，而 SVN 有**：目前为止这是跟 SVN 相比 Git 缺少的最大的一个特征。
5. **Git 的内容完整性要优于 SVN**：Git 的内容存储使用的是 SHA-1 哈希算法。这能确保代码内容的完整性，确保在遇到磁盘故障和网络问题时降低对版本库的破坏。

[git完整命令手册](git-scm.com/docs)

# 操作
## 安装
在官网上即可找到对应平台的安装包

## 创建一个新的仓库
bash作为终端的平台上只需要到对应的目录下输入
`git init`
即可，而windwos平台使用powershell或者cmd其实也是一个意思。但是git在安装的时候给我们安装了一个Git bash，也就是一个模拟bash，所以我们也可以到想建仓库的地方右键打开git bash然后输入git init，我个人觉得cmd和powershell搞了这么久其实很多bash功能都可以实现了，但是他们推荐在bash终端下面搞，那么我们用git bash搞也挺好。

## clone
翻译是检出仓库，就是把一个仓库里面的所有代码复制到你所在的仓库里。
如果你要从本地的另一个仓库clone，那么使用下面的代码。
`git clone /path/to/repository`
如果你要从远程服务器上的仓库，那么使用下面的代码
`git clone username@host:/path/to/repository`

## 工作流
你的本地仓库由 git 维护的三棵“树”组成。第一个是你的 **工作目录**，它持有实际文件；第二个是 **暂存区（Index）**，它像个缓存区域，临时保存你的改动；最后是 **HEAD**，它指向你最后一次提交的结果。
如何利用dir index和head添加和提交呢？
使用下面的代码将代码存到暂存区
`git add <filename>`
这里通配符\*也是作数的，也就是说可以使用git add \*这样的代码
使用下面的代码将缓存区的代码提交到HEAD
`git commit -m "代码提交信息"`
接下来就是将代码和远程服务器的远端仓库同步了。
如果你没有和一个远程服务器连接，使用下面的代码添加
`git remote add origin <server>`
这时，origin就代表了你的远端服务器server。
万事俱备，使用下面的代码将HEAD的代码“推”到远程服务器
`git push origin master`
这里的master是分支，可以修改的。我个人觉得分支可以说是非常有用的一个功能了，我在下一个标签里写分支的使用方式。

## 分支
分支是用来将特性开发绝缘开来的。在你创建仓库的时候，master 是“默认的”分支。在其他分支上进行开发，完成后再将它们合并到主分支上。
可以说你写了另一段代码，或许是你心血来潮，可能除了是一个很酷的点子以外，对你的项目的目标没有任何卵用，此时你又不想在你的成品代码中保存这些东西，你就可以新建一个分支，把你的代码存进去，说不定在以后的某个时候他就会变得非常有用了。
此外，对我们这种hexo搭的个人博客，我们也可以新建一个分支做backup，毕竟你存在.io里的东西都是hexo生成出来的网站，而你自己的md文件啥的都不在。

说了这么多，具体操作是什么呢
使用下面的代码创建一个分支并且切换过去(feature_x是起名字的地方)
`git checkout -b feature_x`
使用下面的代码切换分支(把master换成你想切换到的分支就行了)
`git checkout master`
使用下面的代码将分支删除
`git branch -d feature_x`
以及将这个分支push到远程服务器去
`git push origin <branch>`

比如我们的hexo备份，我们就可以在source目录哪儿里
```
git remote add origin ***.git
git add ./source
git commit -m "wharever you want to say"
git push origin backup
```
然后我们的.io下面就会多一个分支，里面存着你的所有hexo源码

## 更新与合并
使用下面的代码来获取（fetch）并合并（merge）远端的改动以将本地仓库更新到最新改动
`git pull`
要合并其他分支到你的当前分支（例如 master）使用
`git merge <branch>`
在这两种情况下，git 都会尝试去自动合并改动。遗憾的是，这可能并非每次都成功，并可能出现冲突（conflicts）。 这时候就需要你修改这些文件来手动合并这些冲突（conflicts）。改完之后，你需要执行如下命令以将它们标记为合并成功：
`git add <filename>`
在合并改动之前，你可以使用如下命令预览差异
`git diff <source_branch> <target_branch>`

## 标签
为软件发布创建标签是推荐的。这个概念早已存在，在 SVN 中也有。你可以执行如下命令创建一个叫做 1.0.0 的标签：
`git tag 1.0.0 1b2e1d63ff`
1b2e1d63ff 是你想要标记的提交 ID 的前 10 位字符。可以使用下列命令获取提交 ID：
`git log`
你也可以使用少一点的提交 ID 前几位，只要它的指向具有唯一性。

## 替换本地改动
假如你操作失误（当然，这最好永远不要发生），你可以使用如下命令替换掉本地改动：
`git checkout -- <filename>`
此命令会使用 HEAD 中的最新内容替换掉你的工作目录中的文件。已添加到暂存区的改动以及新文件都不会受到影响。 
假如你想丢弃你在本地的所有改动与提交，可以到服务器上获取最新的版本历史，并将你本地主分支指向它：
`git fetch origin`
`git reset --hard origin/master`